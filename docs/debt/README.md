# 技术负债追踪 (Technical Debt Tracking)

本目录用于追踪 Auth9 项目中的技术负债，确保问题被记录、优先级化并最终解决。

## 目录

| ID | 标题 | 状态 | 优先级 | 创建日期 | 预计修复 |
|----|------|------|--------|----------|----------|
| ~~001~~ | ~~Action Test Endpoint - axum/tonic 版本冲突~~ | 🟢 Resolved | — | 2026-02-12 | 已于 2026-02-19 解决（升级 OpenTelemetry 0.27→0.31） |

---

## 状态说明

- 🔴 **Active** - 当前存在且影响功能
- 🟡 **Monitored** - 已有 workaround，等待条件成熟解决
- 🟢 **Resolved** - 已解决，保留记录供参考
- ⚫ **Won't Fix** - 决定不修复，但需要记录原因

---

## 优先级说明

### Critical (关键)
- 影响核心功能或生产稳定性
- 有安全风险
- 阻塞重要功能开发
- **行动**: 立即修复

### High (高)
- 显著影响用户体验
- 增加维护成本
- 影响性能
- **行动**: 1-2 周内修复

### Medium (中)
- 有合理的 workaround
- 影响有限
- 可以推迟但不应忽略
- **行动**: 1-3 个月内修复

### Low (低)
- 几乎无影响
- 可选的改进
- 代码质量问题
- **行动**: 机会主义修复（有空时）

---

## 技术负债文档模板

创建新的技术负债文档时，使用以下结构：

```markdown
# 技术负债 #XXX: [简短标题]

**创建日期**: YYYY-MM-DD
**状态**: [🔴 Active | 🟡 Monitored | 🟢 Resolved | ⚫ Won't Fix]
**优先级**: [Critical | High | Medium | Low]
**影响范围**: [功能/模块名称]
**预计修复时间**: [时间估计]

---

## 问题描述
[清晰描述技术负债的本质]

### 技术细节
[技术层面的详细说明]

---

## 当前解决方案 (Workaround)
[如果有临时解决方案，详细说明]

### 功能影响
#### ✅ 不受影响的功能
- [列表]

#### ❌ 受影响的功能
- [列表]

---

## 长期解决方案
[列出可能的解决方案，包括优缺点]

### 方案 1: [方案名称]
**描述**: ...
**优点**: ...
**缺点**: ...
**预计时间**: ...

### 方案 2: [方案名称]
...

---

## 推荐方案与时间线
[推荐的解决方案和具体时间表]

---

## 相关资源
### 文档
- [相关文档链接]

### 代码位置
- [相关代码文件和行号]

### 上游依赖
- [相关的外部依赖/issue]

---

## 影响评估
[对用户、开发、部署的影响]

---

## 验收标准
[关闭此技术负债需要满足的条件]

- [ ] 标准1
- [ ] 标准2

---

## 历史记录
| 日期 | 状态 | 变更 | 负责人 |
|------|------|------|--------|
| YYYY-MM-DD | 状态 | 变更说明 | 姓名 |

---

## 相关技术负债
- #XXX - [关联的其他技术负债]
```

---

## 审查流程

### 月度审查
每月第一周，团队应审查所有 Active 和 Monitored 状态的技术负债：

1. **更新状态**
   - 检查是否有新的解决方案可用
   - 更新优先级
   - 记录任何新的进展

2. **优先级排序**
   - 根据业务需求重新评估优先级
   - 分配下个月的修复任务

3. **决策**
   - 决定是否立即修复
   - 是否需要更多调研
   - 是否接受风险并标记为 "Won't Fix"

### 季度回顾
每季度末，进行深度审查：

1. **趋势分析**
   - 技术负债是增加还是减少
   - 哪些类型的负债最常见
   - 根本原因分析

2. **流程改进**
   - 如何预防类似的技术负债
   - 是否需要更新开发流程
   - 工具和自动化的改进

---

## 添加新技术负债

### 何时创建技术负债文档

创建技术负债文档，当：

- ✅ 有临时 workaround 但不是最佳解决方案
- ✅ 需要等待外部依赖更新
- ✅ 功能受限但不阻塞发布
- ✅ 代码质量问题需要大规模重构
- ✅ 性能问题需要深入优化

不要创建文档，当：

- ❌ 是简单的 bug（使用 issue tracker）
- ❌ 是功能请求（使用 feature request）
- ❌ 可以立即修复（直接修复）
- ❌ 不影响项目（忽略）

### 创建流程

1. **分配 ID**
   - 使用连续编号：001, 002, 003...
   - 格式：`XXX-short-kebab-case-title.md`

2. **填写文档**
   - 使用上面的模板
   - 确保所有部分都填写完整
   - 链接相关代码和文档

3. **更新 README**
   - 在上面的表格中添加新条目
   - 按 ID 排序

4. **通知团队**
   - 在团队会议中讨论
   - 或发送通知邮件/消息

---

## 关闭技术负债

当技术负债被解决时：

1. **更新文档**
   - 状态改为 🟢 Resolved
   - 添加解决方案详情到历史记录
   - 记录验收标准的完成情况

2. **更新 README**
   - 在表格中更新状态
   - 可选：移到"已解决"部分

3. **保留文档**
   - 不要删除文档
   - 作为历史参考和学习材料

4. **经验总结**
   - 记录学到的经验
   - 更新最佳实践文档
   - 分享给团队

---

## 工具和自动化

### 未来改进

考虑实现以下自动化：

- [ ] 技术负债仪表板（显示统计和趋势）
- [ ] 月度审查提醒（Cron job）
- [ ] CI/CD 集成（显示技术负债统计）
- [ ] 自动链接到 GitHub Issues
- [ ] 技术负债报告生成器

---

## 相关文档

- [架构决策记录 (ADR)](../adr/) - 如果存在
- [项目计划](../plans/)
- [API 文档](../api/)
- [QA 测试文档](../qa/)

---

## 联系方式

如有疑问或建议，请：
- 创建 GitHub Issue
- 在团队会议中讨论
- 联系技术负责人

---

**最后更新**: 2026-02-12
**维护者**: Backend Team
