# Auth9 文档更新日志 - 2026-02-17

## 概述

本次更新为 Auth9 项目文档的重大更新，新增了 **B2B 入驻** 和 **企业级 SSO 连接器** 两大核心功能的完整文档，并对现有文档进行了全面优化。

## 新增功能文档

### 1. B2B 入驻与组织创建

**文档路径**: [wiki/B2B入驻与组织创建.md](B2B入驻与组织创建.md)

**功能说明**:

Auth9 现在支持 B2B 场景下的自助入驻流程：

- **用户注册** - 企业用户可以自助注册个人账号
- **组织创建** - 注册后自动引导创建组织（租户）
- **域名绑定** - 支持绑定企业域名，用于 SSO 和用户关联
- **多组织支持** - 一个用户可以加入多个组织

**文档内容**:

- 用户注册完整流程
- 组织创建详细步骤
- 组织管理操作指南
- 组织标识（Slug）和域名规则
- 加入已有组织的方法
- 多组织切换说明
- 完整的 API 参考
- 常见问题解答
- 最佳实践建议

**典型场景**:

```
场景：Acme 公司首次使用 Auth9

1. IT 管理员张三注册账号（zhangsan@acme.com）
2. 创建组织：
   - 组织名称：Acme Corporation
   - 组织标识：acme
   - 企业域名：acme.com（系统自动建议）
3. 配置服务和角色
4. 邀请团队成员加入
```

### 2. 企业级 SSO 连接器

**文档路径**: [wiki/企业级SSO连接器.md](企业级SSO连接器.md)

**功能说明**:

Auth9 支持租户级别的企业 SSO 连接器配置：

- **租户隔离** - 每个租户独立配置 SSO，互不影响
- **双协议支持** - 支持 OIDC 和 SAML 2.0
- **域名路由** - 根据用户邮箱域名自动选择 SSO
- **主流集成** - 支持 Azure AD、Okta、ADFS 等

**与全局身份提供商的区别**:

| 特性 | 全局身份提供商 | 企业 SSO 连接器 |
|------|--------------|---------------|
| 配置级别 | 系统级别 | 租户级别 |
| 适用范围 | 所有租户共享 | 单个租户独享 |
| 典型场景 | Google、GitHub | 企业 OIDC、SAML |
| 配置位置 | Settings > Identity Providers | Tenants > [租户] > SSO |

**文档内容**:

- 企业 SSO vs 全局身份提供商对比
- OIDC 配置完整指南
- SAML 2.0 配置完整指南
- 域名绑定和自动路由
- 用户身份映射机制
- Azure AD 配置示例
- Okta 配置示例
- ADFS 配置示例
- 登录流程详解
- 优先级和路由规则
- 安全配置建议
- 故障排查指南
- 最佳实践

**配置示例 (Azure AD)**:

```json
{
  "alias": "acme-azure-ad",
  "display_name": "Acme Azure AD",
  "provider_type": "oidc",
  "enabled": true,
  "priority": 100,
  "config": {
    "clientId": "abc123-def456-...",
    "clientSecret": "your-secret",
    "authorizationEndpoint": "https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize",
    "tokenEndpoint": "https://login.microsoftonline.com/{tenant}/oauth2/v2.0/token",
    "userInfoEndpoint": "https://graph.microsoft.com/oidc/userinfo"
  }
}
```

## 更新的现有文档

### 1. Wiki 主页 (wiki/Home.md)

**更新内容**:

- ✅ 添加 "B2B 自助入驻" 到核心特性列表
- ✅ 添加 "企业 SSO 连接器" 到核心特性列表
- ✅ 在入门指南中添加新文档链接
- ✅ 在安全功能中添加企业级 SSO 连接器
- ✅ 更新最后更新日期为 2026-02-17

### 2. Wiki 总览 (wiki/README.md)

**更新内容**:

- ✅ 在入门指南表格中添加 B2B 入驻文档
- ✅ 在安全功能中区分全局和租户级 SSO
- ✅ 更新文档统计（28 → 32 篇）
- ✅ 在各角色推荐阅读中添加新文档
- ✅ 在按主题查找中添加新文档分类
- ✅ 更新文档版本号（1.4.0 → 1.5.0）

### 3. 用户操作指南 (userguide/USER_GUIDE.md)

**更新内容**:

- ✅ 新增第 0 节 "B2B 首次入驻" (80+ 行)
  - 用户注册流程
  - 组织创建步骤
  - 多组织支持说明
- ✅ 新增第 12 节 "企业级 SSO 连接器" (200+ 行)
  - OIDC 配置步骤
  - SAML 配置步骤
  - 域名绑定操作
  - 故障排查指南
- ✅ 更新后续章节编号
- ✅ 更新目录结构

### 4. 多租户管理 (wiki/多租户管理.md)

**更新内容**:

- ✅ 添加 `domain` 属性到租户属性表
- ✅ 新增 "企业域名管理" 章节
- ✅ 更新创建租户指南，包含域名设置
- ✅ 添加域名规则和使用场景说明
- ✅ 添加域名与企业 SSO 的关联说明
- ✅ 添加当前限制说明

### 5. 快速开始 (wiki/快速开始.md)

**更新内容**:

- ✅ 区分新用户和已有账号的访问流程
- ✅ 添加 B2B 入驻流程说明
- ✅ 更新"下一步"章节，分为新用户和已有账号两种路径
- ✅ 添加企业 SSO 配置到推荐操作

### 6. 社交登录与SSO (wiki/社交登录与SSO.md)

**更新内容**:

- ✅ 添加文档说明（本文档介绍全局身份提供商）
- ✅ 新增身份提供商级别对比表格
- ✅ 添加选择建议
- ✅ 添加到企业级 SSO 连接器文档的引用

### 7. 项目 README (README.md)

**更新内容**:

- ✅ 添加 "B2B Onboarding" 到功能列表
- ✅ 添加 "Enterprise SSO Connectors" 到功能列表
- ✅ 在文档导航中添加新文档链接

## 文档统计

### 整体统计

- **文档总数**: 32 篇（新增 2 篇）
- **文档总行数**: 16,000+ 行
- **新增文档**: 2 篇
  - B2B 入驻与组织创建 (320+ 行)
  - 企业级 SSO 连接器 (400+ 行)
- **更新文档**: 7 篇
- **跨文档引用**: 18+ 处

### 新文档规模

| 文档 | 行数 | 文件大小 | 章节数 |
|------|------|---------|--------|
| B2B入驻与组织创建.md | 320+ | 11KB | 12 |
| 企业级SSO连接器.md | 400+ | 15KB | 15 |

## 技术亮点

### 1. B2B 入驻流程

- **自助注册** - 用户可以自行注册和创建组织
- **域名建议** - 根据注册邮箱自动建议企业域名
- **零配置启动** - 注册后即可开始使用
- **多组织支持** - 一个用户可以管理多个组织

### 2. 企业级 SSO

- **租户隔离** - 每个租户独立配置，互不影响
- **双协议支持** - OIDC 和 SAML 2.0 全面支持
- **域名路由** - 智能识别用户域名，自动选择 SSO
- **主流集成** - 提供 Azure AD、Okta、ADFS 完整示例

### 3. 文档质量

- **全中文** - 所有新增文档均为中文编写
- **详细步骤** - 提供详细的操作步骤说明
- **代码示例** - 包含丰富的 JSON 配置示例
- **API 参考** - 完整的 REST API 请求/响应示例
- **故障排查** - 常见问题和解决方案
- **最佳实践** - 基于实际场景的建议

## 用户价值

### 对新用户

- ✅ **快速上手** - B2B 入驻流程降低使用门槛
- ✅ **自助服务** - 无需管理员协助即可创建组织
- ✅ **清晰指引** - 完整的文档指导每一步操作

### 对企业用户

- ✅ **企业 SSO** - 可以对接现有的企业身份系统
- ✅ **租户隔离** - 每个租户独立配置，安全可靠
- ✅ **主流兼容** - 支持 Azure AD、Okta、ADFS 等
- ✅ **域名路由** - 智能识别，提升用户体验

### 对开发者

- ✅ **完整文档** - API 文档、配置示例齐全
- ✅ **集成示例** - 提供三大主流身份提供商的完整配置
- ✅ **故障排查** - 常见问题有明确的解决方案

## 后续计划

### 功能增强

- [ ] 域名验证功能（DNS TXT 记录）
- [ ] 域名自动用户关联
- [ ] SSO 连接器健康监控
- [ ] 更多身份提供商集成示例

### 文档优化

- [ ] 添加更多配置示例
- [ ] 补充视频教程
- [ ] 添加架构图和流程图
- [ ] 翻译为英文版本

## 相关链接

### 新增文档

- [B2B 入驻与组织创建](B2B入驻与组织创建.md)
- [企业级 SSO 连接器](企业级SSO连接器.md)

### 更新文档

- [Wiki 主页](Home.md)
- [Wiki 总览](README.md)
- [用户操作指南](../userguide/USER_GUIDE.md)
- [多租户管理](多租户管理.md)
- [快速开始](快速开始.md)
- [社交登录与SSO](社交登录与SSO.md)
- [项目 README](../README.md)

### 相关文档

- [认证流程](认证流程.md) - 了解 OIDC 认证机制
- [RBAC 权限系统](RBAC权限系统.md) - 角色和权限管理
- [邀请系统](邀请系统.md) - 邀请团队成员
- [最佳实践](最佳实践.md) - 安全配置建议

---

**文档版本**: 1.5.0  
**更新日期**: 2026-02-17  
**更新内容**: 新增 B2B 入驻和企业级 SSO 连接器文档
