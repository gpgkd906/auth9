# 快速开始

本指南将帮助您在 5 分钟内快速搭建并运行 Auth9。

## 前置要求

- Docker 20.10+
- Docker Compose 2.0+
- 至少 4GB 可用内存

## 使用 Docker Compose 启动

### 1. 克隆仓库

```bash
git clone https://github.com/gpgkd906/auth9.git
cd auth9
```

### 2. 启动所有服务

```bash
docker-compose up -d
```

这将启动以下服务：

- **auth9-core**: 后端 API 服务 (端口 8080)
- **auth9-portal**: 管理界面 (端口 3000)
- **TiDB**: 数据库 (端口 4000)
- **Redis**: 缓存服务 (端口 6379)
- **Keycloak**: 认证引擎 (端口 8081)

### 3. 等待服务启动

```bash
# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f
```

等待所有服务健康检查通过（大约 1-2 分钟）。

### 4. 访问管理界面

在浏览器中打开：http://localhost:3000

默认管理员账号：
- **用户名**: admin@auth9.local
- **密码**: Admin123!

### 5. 验证 API 服务

```bash
# 健康检查
curl http://localhost:8080/health

# 获取 OpenID 配置
curl http://localhost:8080/.well-known/openid-configuration
```

## 下一步

现在您已经成功运行了 Auth9，可以：

1. **创建第一个租户** - 在管理界面中创建租户
2. **添加用户** - 为租户添加用户账号
3. **配置服务** - 注册您的应用服务
4. **设置角色** - 创建角色并分配权限

详细操作请参考：
- [多租户管理](多租户管理.md)
- [用户操作指南](../userguide/USER_GUIDE.md)
- [RBAC 权限系统](RBAC权限系统.md)

## 本地开发模式

如果您需要开发 Auth9 本身，请参考 [本地开发](本地开发.md) 指南。

### 快速开发启动

```bash
# 启动依赖服务（数据库、Redis、Keycloak）
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d

# 运行后端
cd auth9-core
cp .env.example .env
cargo run

# 运行前端（新终端）
cd auth9-portal
cp .env.example .env
npm install
npm run dev
```

## 停止服务

```bash
# 停止所有服务
docker-compose down

# 停止并删除数据卷
docker-compose down -v
```

## 故障排查

### 端口冲突

如果端口已被占用，可以修改 `docker-compose.yml` 中的端口映射：

```yaml
ports:
  - "13000:3000"  # 修改为其他端口
```

### 服务启动失败

查看特定服务的日志：

```bash
docker-compose logs auth9-core
docker-compose logs auth9-portal
```

### 数据库连接失败

确保 TiDB 已完全启动：

```bash
docker-compose logs tidb
```

更多问题请参考 [故障排查](故障排查.md) 文档。

## 相关资源

- [安装部署](安装部署.md) - 更详细的部署选项
- [配置说明](配置说明.md) - 环境变量配置
- [架构设计](架构设计.md) - 了解系统架构
