# Auth9 ç”¨æˆ·æ“ä½œæŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜äº† Auth9 ç®¡ç†ç³»ç»Ÿçš„ä¸»è¦æ“ä½œæµç¨‹ï¼ŒåŒ…æ‹¬ç§Ÿæˆ·ç®¡ç†ã€æœåŠ¡æ³¨å†Œã€è§’è‰²æƒé™ç®¡ç†ã€ç”¨æˆ·å…³è”é…ç½®ï¼Œä»¥åŠå®‰å…¨ç›¸å…³çš„åŠŸèƒ½é…ç½®ã€‚

## ç›®å½•

1. [ç§Ÿæˆ·ç®¡ç†](#1-ç§Ÿæˆ·ç®¡ç†-tenant-management)
2. [æœåŠ¡æ³¨å†Œ](#2-æœåŠ¡æ³¨å†Œ-service-registration)
3. [è§’è‰²ä¸æƒé™ç®¡ç†](#3-è§’è‰²ä¸æƒé™ç®¡ç†-rbac)
4. [ç”¨æˆ·ä¸æƒé™å…³è”](#4-ç”¨æˆ·ä¸æƒé™å…³è”-user-provisioning)
5. [é‚€è¯·ç³»ç»Ÿ](#5-é‚€è¯·ç³»ç»Ÿ-invitation-system)
6. [å“ç‰Œå®šåˆ¶](#6-å“ç‰Œå®šåˆ¶-branding)
7. [é‚®ä»¶æ¨¡æ¿](#7-é‚®ä»¶æ¨¡æ¿-email-templates)
8. [å¯†ç ç®¡ç†](#8-å¯†ç ç®¡ç†-password-management)
9. [ä¼šè¯ç®¡ç†](#9-ä¼šè¯ç®¡ç†-session-management)
10. [Passkey ç®¡ç†](#10-passkey-ç®¡ç†-webauthn)
11. [ç¤¾äº¤ç™»å½•ä¸ä¼ä¸š SSO](#11-ç¤¾äº¤ç™»å½•ä¸ä¼ä¸š-sso-identity-providers)
12. [åˆ†æä¸ç›‘æ§](#12-åˆ†æä¸ç›‘æ§-analytics)
13. [å®‰å…¨å‘Šè­¦](#13-å®‰å…¨å‘Šè­¦-security-alerts)
14. [Webhook é…ç½®](#14-webhook-é…ç½®)
15. [æ“ä½œå¼•æ“ (Action Engine)](#15-æ“ä½œå¼•æ“-action-engine)
16. [å¸¸è§é—®é¢˜](#16-å¸¸è§é—®é¢˜)
17. [å¸¸è§å·¥ä½œæµç¨‹](#17-å¸¸è§å·¥ä½œæµç¨‹)

## å¿«é€Ÿå¼€å§‹

é¦–æ¬¡ä½¿ç”¨ Auth9ï¼ŸæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¿«é€Ÿä¸Šæ‰‹ï¼š

1. **ç™»å½•ç³»ç»Ÿ** - ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½• Auth9 Portal
2. **åˆ›å»ºç§Ÿæˆ·** - åˆ›å»ºç¬¬ä¸€ä¸ªç§Ÿæˆ·ç»„ç»‡
3. **æ³¨å†ŒæœåŠ¡** - æ³¨å†Œæ‚¨çš„åº”ç”¨ç¨‹åº
4. **åˆ›å»ºè§’è‰²** - ä¸ºæœåŠ¡å®šä¹‰è§’è‰²å’Œæƒé™
5. **é‚€è¯·ç”¨æˆ·** - æ·»åŠ ç”¨æˆ·å¹¶åˆ†é…è§’è‰²

è¯¦ç»†æ“ä½œè¯·å‚è€ƒä¸‹é¢çš„å„ä¸ªç« èŠ‚ã€‚

---

## 1. ç§Ÿæˆ·ç®¡ç† (Tenant Management)

ç§Ÿæˆ·æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒéš”ç¦»å•ä½ã€‚

### åˆ›å»ºç§Ÿæˆ·
1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ **Tenants**ã€‚
2. ç‚¹å‡»å³ä¸Šè§’çš„ **+ Create Tenant** æŒ‰é’®ã€‚
3. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Name**: ç§Ÿæˆ·æ˜¾ç¤ºåç§° (ä¾‹å¦‚ "Acme Corp")ã€‚
   - **Slug**: ç§Ÿæˆ·å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äº URL (ä¾‹å¦‚ "acme")ã€‚å¿…é¡»å”¯ä¸€ã€‚
   - **Logo URL**: (å¯é€‰) ç§Ÿæˆ· Logo å›¾ç‰‡åœ°å€ã€‚
4. ç‚¹å‡» **Create** å®Œæˆåˆ›å»ºã€‚

### è®¾ç½®ç§Ÿæˆ·
å½“å‰ç§Ÿæˆ·è®¾ç½®ä¸»è¦é€šè¿‡ "Edit" åŠŸèƒ½è¿›è¡Œï¼š
1. åœ¨ç§Ÿæˆ·åˆ—è¡¨ä¸­æ‰¾åˆ°ç›®æ ‡ç§Ÿæˆ·ã€‚
2. ç‚¹å‡»å³ä¾§çš„ `...` èœå•ï¼Œé€‰æ‹© **Edit**ã€‚
3. ä¿®æ”¹åç§°ã€Slug æˆ– Logo URLã€‚
4. ç‚¹å‡» **Save Changes**ã€‚
*(æ³¨ï¼šæ›´é«˜çº§çš„ç§Ÿæˆ·ç‰¹å®šè®¾ç½®å°†åœ¨åç»­ç‰ˆæœ¬ä¸­é€šè¿‡ä¸“é—¨çš„ Settings é¡µé¢æä¾›)*

---

## 2. æœåŠ¡æ³¨å†Œ (Service Registration)

æœåŠ¡ (Service) ä»£è¡¨æ¥å…¥ Auth9 çš„åº”ç”¨ç¨‹åº (OIDC Client)ã€‚

### æ³¨å†Œæ–°æœåŠ¡
1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ **Services**ã€‚
2. ç‚¹å‡»å³ä¸Šè§’çš„ **+ Register Service** æŒ‰é’®ã€‚
3. å¡«å†™ä¿¡æ¯ï¼š
   - **Service Name**: åº”ç”¨åç§°ã€‚
   - **Client ID**: (å¯é€‰) è‡ªå®šä¹‰ Client IDï¼Œç•™ç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆã€‚
   - **Base URL**: åº”ç”¨çš„ä¸» URL (ä¾‹å¦‚ `https://myapp.com`)ã€‚
   - **Redirect URIs**: OIDC å›è°ƒåœ°å€ (ä¾‹å¦‚ `https://myapp.com/callback`)ã€‚å¤šä¸ªåœ°å€ç”¨é€—å·åˆ†éš”ã€‚
   - **Logout URIs**: ç™»å‡ºå›è°ƒåœ°å€ã€‚
4. ç‚¹å‡» **Register**ã€‚

### è·å– Client ID å’Œ Client Secret
1. åœ¨ Services åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ°åˆšåˆ›å»ºçš„æœåŠ¡ã€‚
2. ç‚¹å‡»å³ä¾§èœå•çš„ **Edit**ã€‚
3. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†åº•éƒ¨ "Client Credentials" åŒºåŸŸï¼š
   - **Client ID**: ç›´æ¥æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚
   - **Client Secret**: ç‚¹å‡» **Regenerate Client Secret** æŒ‰é’®ã€‚
     - **è­¦å‘Š**: æ­¤æ“ä½œä¼šä½¿æ—§çš„ Secret å¤±æ•ˆã€‚
     - ç³»ç»Ÿä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†æ˜¾ç¤ºæ–°çš„ Secretã€‚**è¯·ç«‹å³å¤åˆ¶ä¿å­˜**ï¼Œå…³é—­å¯¹è¯æ¡†åå°†æ— æ³•å†æ¬¡æŸ¥çœ‹ Secretã€‚

---

## 3. è§’è‰²ä¸æƒé™ç®¡ç† (RBAC)

è§’è‰² (Role) æ˜¯åŸºäºæœåŠ¡ (Service) å®šä¹‰çš„ã€‚ç§Ÿæˆ·æœ¬èº«ä¸å®šä¹‰è§’è‰²ï¼Œè€Œæ˜¯ä½¿ç”¨æœåŠ¡å®šä¹‰çš„è§’è‰²ã€‚

### å®šä¹‰è§’è‰²
1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ **Roles**ã€‚
2. é¡µé¢ä¼šåˆ—å‡ºæ‰€æœ‰å·²æ³¨å†Œçš„æœåŠ¡ã€‚
3. æ‰¾åˆ°ç›®æ ‡æœåŠ¡ï¼Œç‚¹å‡»è¯¥æœåŠ¡åŒºå—å³ä¸Šè§’çš„ **+ Add Role**ã€‚
4. è¾“å…¥ï¼š
   - **Role Name**: è§’è‰²æ ‡è¯† (ä¾‹å¦‚ `admin`, `editor`).
   - **Description**: è§’è‰²æè¿°ã€‚
5. ç‚¹å‡» **Create**ã€‚

*(æ³¨ï¼šæƒé™ Permission ç›®å‰ä¸»è¦ç”±å¼€å‘äººå‘˜åœ¨åç«¯é¢„è®¾ï¼Œç®¡ç†å‘˜ä¸»è¦è´Ÿè´£ç»„åˆ Role)*

---

## 4. ç”¨æˆ·ä¸æƒé™å…³è” (User Provisioning)

å°†ç”¨æˆ·åŠ å…¥ç§Ÿæˆ·å¹¶åˆ†é…è§’è‰²ã€‚

### é‚€è¯·/åˆ›å»ºç”¨æˆ·
1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ **Users**ã€‚
2. *(å½“å‰ç‰ˆæœ¬ç”¨æˆ·é€šè¿‡ OIDC ç™»å½•è‡ªåŠ¨åˆ›å»ºï¼Œæˆ–é€šè¿‡ç®¡ç†å‘˜ API åˆ›å»ºï¼Œæš‚æ— å‰ç«¯åˆ›å»ºæŒ‰é’®ï¼Œåç»­æ·»åŠ )*
3. åœ¨ç”¨æˆ·åˆ—è¡¨ä¸­æ‰¾åˆ°ç›®æ ‡ç”¨æˆ·ã€‚

### å…³è”ç”¨æˆ·åˆ°ç§Ÿæˆ· (Assign Tenant)
1. ç‚¹å‡»ç”¨æˆ·è¡Œå³ä¾§çš„ `...` èœå•ã€‚
2. é€‰æ‹© **Manage Tenants**ã€‚
3. åœ¨ "Add to Tenant" åŒºåŸŸï¼š
   - é€‰æ‹© **Tenant**ã€‚
   - é€‰æ‹©åˆå§‹ **Role** (å¦‚ `member`)ã€‚
   - ç‚¹å‡» **Add**ã€‚
4. ç”¨æˆ·ç°åœ¨å·²åŠ å…¥è¯¥ç§Ÿæˆ·åˆ—è¡¨ã€‚

### åˆ†é…æœåŠ¡è§’è‰² (Assign Roles)
åœ¨ **Manage Tenants** å¯¹è¯æ¡†ä¸­ï¼Œé’ˆå¯¹å·²åŠ å…¥çš„ç§Ÿæˆ·ï¼š
1. ç‚¹å‡» **Roles** æŒ‰é’®ã€‚
2. åœ¨å¼¹å‡ºæ¡†ä¸­ï¼š
   - é€‰æ‹© **Service** (å³è¯¥è§’è‰²æ‰€å±çš„åº”ç”¨)ã€‚
   - ç³»ç»Ÿä¼šåˆ—å‡ºè¯¥æœåŠ¡ä¸‹å¯ç”¨çš„æ‰€æœ‰è§’è‰²ã€‚
   - å‹¾é€‰é€šè¿‡å¤é€‰æ¡† (Checkbox) ä¸ºç”¨æˆ·åˆ†é…çš„è§’è‰²ã€‚
3. ç‚¹å‡» **Save Roles**ã€‚
4. ç”¨æˆ·åœ¨æ­¤ç§Ÿæˆ·ä¸‹å³æ‹¥æœ‰äº†è¯¥æœåŠ¡å¯¹åº”çš„è§’è‰²æƒé™ã€‚

---

## 5. é‚€è¯·ç³»ç»Ÿ (Invitation System)

Auth9 æä¾›é‚®ä»¶é‚€è¯·åŠŸèƒ½ï¼Œè®©æ‚¨å¯ä»¥å¿«é€Ÿé‚€è¯·ç”¨æˆ·åŠ å…¥ç§Ÿæˆ·ã€‚

### å‘é€é‚€è¯·

1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ **Users** > **Invitations**ã€‚
2. ç‚¹å‡»å³ä¸Šè§’çš„ **Send Invitation** æŒ‰é’®ã€‚
3. å¡«å†™é‚€è¯·ä¿¡æ¯ï¼š
   - **Email**: å—é‚€ç”¨æˆ·çš„é‚®ç®±åœ°å€
   - **Tenant**: é€‰æ‹©ç›®æ ‡ç§Ÿæˆ·
   - **Role**: ä¸ºç”¨æˆ·åˆ†é…çš„åˆå§‹è§’è‰²
   - **Expiry**: é‚€è¯·è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ 7 å¤©ï¼‰
   - **Custom Message**: å¯é€‰çš„æ¬¢è¿æ¶ˆæ¯
4. ç‚¹å‡» **Send** å‘é€é‚€è¯·ã€‚

ç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€é‚€è¯·é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±ï¼ŒåŒ…å«æ³¨å†Œé“¾æ¥ã€‚

### æŸ¥çœ‹é‚€è¯·åˆ—è¡¨

åœ¨ Invitations é¡µé¢å¯ä»¥çœ‹åˆ°ï¼š
- **Pending**: å·²å‘é€ä½†æœªæ¥å—çš„é‚€è¯·
- **Accepted**: å·²æ¥å—çš„é‚€è¯·
- **Expired**: å·²è¿‡æœŸçš„é‚€è¯·
- **Revoked**: å·²æ’¤é”€çš„é‚€è¯·

### ç®¡ç†é‚€è¯·

å¯¹äºæ¯ä¸ªé‚€è¯·ï¼Œæ‚¨å¯ä»¥ï¼š
- **Resend**: é‡æ–°å‘é€é‚€è¯·é‚®ä»¶ï¼ˆç”Ÿæˆæ–°çš„é“¾æ¥ï¼‰
- **Revoke**: æ’¤é”€é‚€è¯·ï¼ˆä½¿é“¾æ¥å¤±æ•ˆï¼‰
- **View Details**: æŸ¥çœ‹é‚€è¯·è¯¦æƒ…

### ç”¨æˆ·æ¥å—é‚€è¯·

1. ç”¨æˆ·æ”¶åˆ°é‚®ä»¶åï¼Œç‚¹å‡»é‚®ä»¶ä¸­çš„é‚€è¯·é“¾æ¥
2. å¦‚æœå·²æœ‰è´¦å·ï¼Œç™»å½•å³å¯åŠ å…¥ç§Ÿæˆ·
3. å¦‚æœæ˜¯æ–°ç”¨æˆ·ï¼Œéœ€è¦å®Œæˆæ³¨å†Œï¼š
   - è®¾ç½®å¯†ç 
   - å¡«å†™ä¸ªäººä¿¡æ¯
   - ç¡®è®¤é‚®ç®±
4. æ³¨å†Œå®Œæˆåè‡ªåŠ¨åŠ å…¥ç§Ÿæˆ·å¹¶è·å¾—æŒ‡å®šè§’è‰²

### æ‰¹é‡é‚€è¯·

å¯¹äºéœ€è¦é‚€è¯·å¤šä¸ªç”¨æˆ·çš„åœºæ™¯ï¼š
1. å‡†å¤‡ CSV æ–‡ä»¶ï¼ŒåŒ…å«é‚®ç®±å’Œè§’è‰²ä¿¡æ¯
2. åœ¨ Invitations é¡µé¢ç‚¹å‡» **Bulk Import**
3. ä¸Šä¼  CSV æ–‡ä»¶
4. é¢„è§ˆå¹¶ç¡®è®¤é‚€è¯·åˆ—è¡¨
5. ç‚¹å‡» **Send All** æ‰¹é‡å‘é€

---

## 6. å“ç‰Œå®šåˆ¶ (Branding)

è‡ªå®šä¹‰ç§Ÿæˆ·çš„è§†è§‰å¤–è§‚ï¼Œæ‰“é€ ä¸“å±å“ç‰Œä½“éªŒã€‚

### é…ç½®å“ç‰Œå…ƒç´ 

1. å¯¼èˆªåˆ° **Settings** > **Branding**ã€‚
2. é€‰æ‹©è¦é…ç½®çš„ç§Ÿæˆ·ã€‚
3. é…ç½®ä»¥ä¸‹å…ƒç´ ï¼š

#### ä¸Šä¼  Logo
- **ä¸» Logo**: ç”¨äº Portal é¡¶éƒ¨å¯¼èˆªæ ï¼ˆæ¨è 200x60 pxï¼‰
- **å° Logo**: ç”¨äºç§»åŠ¨ç«¯å’Œ Faviconï¼ˆæ¨è 40x40 pxï¼‰
- **ç™»å½•é¡µ Logo**: ç”¨äº Keycloak ç™»å½•é¡µé¢ï¼ˆæ¨è 300x100 pxï¼‰

ä¸Šä¼ æ­¥éª¤ï¼š
1. ç‚¹å‡»å¯¹åº”çš„ **Upload** æŒ‰é’®
2. é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆPNGã€SVGã€JPEGï¼Œæœ€å¤§ 2MBï¼‰
3. ç³»ç»Ÿè‡ªåŠ¨è£å‰ªå’Œä¼˜åŒ–
4. ç‚¹å‡» **Save**

**æç¤º**: å»ºè®®ä½¿ç”¨é€æ˜èƒŒæ™¯çš„ PNG æˆ– SVG æ ¼å¼

#### é…ç½®é¢œè‰²ä¸»é¢˜
1. ç‚¹å‡»é¢œè‰²é€‰æ‹©å™¨
2. é€‰æ‹©æˆ–è¾“å…¥ HEX é¢œè‰²ç 
3. å¯é…ç½®çš„é¢œè‰²ï¼š
   - **Primary Color**: ä¸»è¦æŒ‰é’®ã€é“¾æ¥ï¼ˆé»˜è®¤ #007AFFï¼‰
   - **Secondary Color**: æ¬¡è¦æŒ‰é’®ã€è¾…åŠ©å…ƒç´ 
   - **Accent Color**: å¼ºè°ƒè‰²ã€æç¤º
   - **Background Color**: é¡µé¢èƒŒæ™¯
   - **Text Color**: ä¸»è¦æ–‡å­—
   - **Border Color**: è¾¹æ¡†ã€åˆ†éš”çº¿
4. æŸ¥çœ‹å³ä¾§å®æ—¶é¢„è§ˆ
5. ç‚¹å‡» **Apply Theme** åº”ç”¨

**é¢„è®¾ä¸»é¢˜**ï¼š
- ğŸ’™ Auth9 Blue (é»˜è®¤)
- ğŸŸ£ Purple Dream
- ğŸŸ¢ Nature Green
- ğŸ”´ Passionate Red
- âš« Dark Mode

#### è‡ªå®šä¹‰å­—ä½“
é€‰æ‹©å­—ä½“ç³»åˆ—ï¼š
- Inter (é»˜è®¤)
- SF Pro (è‹¹æœé£æ ¼)
- Roboto (Material Design)
- æ€æºé»‘ä½“ (Noto Sans CJK)

### å“ç‰Œåº”ç”¨èŒƒå›´

å“ç‰Œé…ç½®ä¼šè‡ªåŠ¨åº”ç”¨åˆ°ï¼š
- âœ… Auth9 Portal ç®¡ç†ç•Œé¢
- âœ… Keycloak ç™»å½•é¡µé¢
- âœ… ç³»ç»Ÿé‚®ä»¶æ¨¡æ¿
- âœ… ç§»åŠ¨ç«¯åº”ç”¨ï¼ˆæœªæ¥æ”¯æŒï¼‰

### é‡ç½®å“ç‰Œé…ç½®

å¦‚éœ€æ¢å¤é»˜è®¤è®¾ç½®ï¼š
1. åœ¨ Branding é¡µé¢ç‚¹å‡» **Reset to Default**
2. ç¡®è®¤æ“ä½œ
3. æ‰€æœ‰å“ç‰Œé…ç½®å°†æ¢å¤ä¸ºç³»ç»Ÿé»˜è®¤å€¼

---

## 7. é‚®ä»¶æ¨¡æ¿ (Email Templates)

è‡ªå®šä¹‰ç³»ç»Ÿå‘é€çš„æ‰€æœ‰é‚®ä»¶çš„å¤–è§‚å’Œå†…å®¹ã€‚

### é‚®ä»¶ç±»å‹

Auth9 æ”¯æŒè‡ªå®šä¹‰ä»¥ä¸‹é‚®ä»¶æ¨¡æ¿ï¼š

| ç±»å‹ | è§¦å‘æ—¶æœº |
|------|---------|
| **Welcome Email** | ç”¨æˆ·æ³¨å†ŒæˆåŠŸ |
| **Invitation Email** | å‘é€é‚€è¯· |
| **Password Reset** | è¯·æ±‚é‡ç½®å¯†ç  |
| **Password Changed** | å¯†ç ä¿®æ”¹æˆåŠŸ |
| **Email Verification** | æ³¨å†Œæˆ–æ›´æ”¹é‚®ç®± |
| **MFA Setup** | å¯ç”¨å¤šå› ç´ è®¤è¯ |
| **Login Alert** | å¼‚å¸¸ç™»å½•æ£€æµ‹ |
| **Session Revoked** | ä¼šè¯è¢«æ’¤é”€ |
| **Account Locked** | è´¦æˆ·è¢«é”å®š |

### ç¼–è¾‘é‚®ä»¶æ¨¡æ¿

1. å¯¼èˆªåˆ° **Settings** > **Email Templates**ã€‚
2. é€‰æ‹©è¦ç¼–è¾‘çš„é‚®ä»¶ç±»å‹ã€‚
3. ç¼–è¾‘æ¨¡æ¿å†…å®¹ï¼š
   - **Subject**: é‚®ä»¶ä¸»é¢˜
   - **From Name**: å‘ä»¶äººåç§°
   - **From Email**: å‘ä»¶äººé‚®ç®±
   - **Reply To**: å›å¤é‚®ç®±ï¼ˆå¯é€‰ï¼‰
   - **HTML Body**: HTML æ ¼å¼é‚®ä»¶æ­£æ–‡
   - **Text Body**: çº¯æ–‡æœ¬æ ¼å¼é‚®ä»¶æ­£æ–‡
4. ä½¿ç”¨å³ä¾§é¢„è§ˆæŸ¥çœ‹æ•ˆæœã€‚

### åŠ¨æ€å˜é‡

é‚®ä»¶æ¨¡æ¿æ”¯æŒåŠ¨æ€å˜é‡ï¼Œç”¨ `{{variable}}` è¯­æ³•ï¼š

**å…¨å±€å˜é‡**ï¼ˆæ‰€æœ‰é‚®ä»¶å¯ç”¨ï¼‰ï¼š
- `{{tenant_name}}` - ç§Ÿæˆ·åç§°
- `{{tenant_logo_url}}` - ç§Ÿæˆ· Logo URL
- `{{portal_url}}` - Portal è®¿é—®åœ°å€
- `{{support_email}}` - æ”¯æŒé‚®ç®±
- `{{current_year}}` - å½“å‰å¹´ä»½
- `{{primary_color}}` - å“ç‰Œä¸»è‰²

**ç”¨æˆ·å˜é‡**ï¼š
- `{{user_name}}` - ç”¨æˆ·å§“å
- `{{user_email}}` - ç”¨æˆ·é‚®ç®±
- `{{user_first_name}}` - å
- `{{user_last_name}}` - å§“

**ç‰¹å®šé‚®ä»¶å˜é‡**ï¼ˆæ ¹æ®é‚®ä»¶ç±»å‹ä¸åŒï¼‰ï¼š
- é‚€è¯·é‚®ä»¶ï¼š`{{invitation_url}}`, `{{sender_name}}`, `{{role_name}}`
- å¯†ç é‡ç½®ï¼š`{{reset_url}}`, `{{expires_in_minutes}}`
- ç™»å½•å‘Šè­¦ï¼š`{{login_ip}}`, `{{login_location}}`, `{{login_device}}`

### æµ‹è¯•é‚®ä»¶æ¨¡æ¿

åœ¨ä¿å­˜å‰æµ‹è¯•é‚®ä»¶æ•ˆæœï¼š
1. åœ¨æ¨¡æ¿ç¼–è¾‘é¡µé¢ç‚¹å‡» **Send Test Email**
2. è¾“å…¥æµ‹è¯•é‚®ç®±åœ°å€
3. ç³»ç»Ÿå‘é€æµ‹è¯•é‚®ä»¶åˆ°æŒ‡å®šé‚®ç®±
4. æ£€æŸ¥é‚®ä»¶æ˜¾ç¤ºæ•ˆæœ

### å¤šè¯­è¨€æ”¯æŒ

å¦‚æœéœ€è¦æ”¯æŒå¤šè¯­è¨€ï¼š
1. åœ¨æ¨¡æ¿ç¼–è¾‘é¡µé¢é€‰æ‹© **Add Translation**
2. é€‰æ‹©ç›®æ ‡è¯­è¨€ï¼ˆè‹±æ–‡ã€ä¸­æ–‡ã€æ—¥æ–‡ç­‰ï¼‰
3. ä¸ºæ¯ç§è¯­è¨€ç¼–è¾‘ç‹¬ç«‹çš„å†…å®¹
4. ç³»ç»Ÿä¼šæ ¹æ®ç”¨æˆ·è¯­è¨€åå¥½è‡ªåŠ¨é€‰æ‹©

### é‡ç½®æ¨¡æ¿

æ¢å¤ä¸ºç³»ç»Ÿé»˜è®¤æ¨¡æ¿ï¼š
1. åœ¨æ¨¡æ¿ç¼–è¾‘é¡µé¢ç‚¹å‡» **Reset to Default**
2. ç¡®è®¤æ“ä½œ
3. æ¨¡æ¿å†…å®¹å°†æ¢å¤ä¸ºç³»ç»Ÿé»˜è®¤ç‰ˆæœ¬

---

## 8. å¯†ç ç®¡ç† (Password Management)

Auth9 æä¾›å®Œæ•´çš„å¯†ç ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯†ç é‡ç½®ã€å¯†ç ä¿®æ”¹å’Œå¯†ç ç­–ç•¥é…ç½®ã€‚

### å¯†ç é‡ç½®æµç¨‹

#### ç”¨æˆ·å¿˜è®°å¯†ç 
1. åœ¨ç™»å½•é¡µé¢ç‚¹å‡» **Forgot Password** é“¾æ¥ã€‚
2. è¾“å…¥æ³¨å†Œé‚®ç®±åœ°å€ã€‚
3. ç‚¹å‡» **Send Reset Link**ã€‚
4. æ£€æŸ¥é‚®ç®±ï¼Œç‚¹å‡»é‡ç½®é“¾æ¥ã€‚
5. åœ¨é‡ç½®é¡µé¢è¾“å…¥æ–°å¯†ç å¹¶ç¡®è®¤ã€‚
6. ç‚¹å‡» **Reset Password** å®Œæˆã€‚

#### ç®¡ç†å‘˜è§¦å‘å¯†ç é‡ç½®
1. å¯¼èˆªåˆ° **Users** é¡µé¢ã€‚
2. æ‰¾åˆ°ç›®æ ‡ç”¨æˆ·ï¼Œç‚¹å‡» `...` èœå•ã€‚
3. é€‰æ‹© **Reset Password**ã€‚
4. ç³»ç»Ÿä¼šå‘é€é‡ç½®é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±ã€‚

### ä¿®æ”¹å¯†ç  (å½“å‰ç”¨æˆ·)
1. ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å¤´åƒã€‚
2. é€‰æ‹© **Settings** > **Security**ã€‚
3. åœ¨ "Change Password" åŒºåŸŸï¼š
   - è¾“å…¥ **Current Password**ï¼ˆå½“å‰å¯†ç ï¼‰
   - è¾“å…¥ **New Password**ï¼ˆæ–°å¯†ç ï¼Œè‡³å°‘8ä½ï¼‰
   - è¾“å…¥ **Confirm Password**ï¼ˆç¡®è®¤æ–°å¯†ç ï¼‰
4. ç‚¹å‡» **Change Password**ã€‚

### é…ç½®å¯†ç ç­–ç•¥ (ç®¡ç†å‘˜)
1. å¯¼èˆªåˆ° **Settings** > **Security**ã€‚
2. é€‰æ‹©ç›®æ ‡ç§Ÿæˆ·ï¼ˆå¦‚æœæœ‰å¤šä¸ªï¼‰ã€‚
3. åœ¨ "Password Policy" åŒºåŸŸé…ç½®ï¼š
   - **Minimum Length**: æœ€å°å¯†ç é•¿åº¦ï¼ˆé»˜è®¤8ï¼‰
   - **Maximum Length**: æœ€å¤§å¯†ç é•¿åº¦ï¼ˆé»˜è®¤128ï¼‰
   - **Password Expiry**: å¯†ç è¿‡æœŸå¤©æ•°ï¼ˆ0è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼‰
   - **Password History**: è®°ä½çš„å†å²å¯†ç æ•°é‡ï¼ˆé˜²æ­¢é‡å¤ä½¿ç”¨ï¼‰
   - **Lockout Threshold**: é”å®šå‰å…è®¸çš„å¤±è´¥æ¬¡æ•°
   - **Lockout Duration**: é”å®šæŒç»­æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
   - **Require Uppercase**: è¦æ±‚å¤§å†™å­—æ¯
   - **Require Lowercase**: è¦æ±‚å°å†™å­—æ¯
   - **Require Numbers**: è¦æ±‚æ•°å­—
   - **Require Symbols**: è¦æ±‚ç‰¹æ®Šç¬¦å·
4. ç‚¹å‡» **Save Policy**ã€‚

---

## 9. ä¼šè¯ç®¡ç† (Session Management)

ç®¡ç†ç”¨æˆ·çš„æ´»è·ƒä¼šè¯ï¼Œæ”¯æŒæŸ¥çœ‹å’Œæ’¤é”€ä¼šè¯ã€‚

### æŸ¥çœ‹æˆ‘çš„ä¼šè¯
1. ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å¤´åƒã€‚
2. é€‰æ‹© **Settings** > **Sessions**ã€‚
3. é¡µé¢æ˜¾ç¤ºï¼š
   - **Current Session**: å½“å‰ä¼šè¯ä¿¡æ¯ï¼ˆè®¾å¤‡ã€IPã€æœ€åæ´»è·ƒæ—¶é—´ï¼‰
   - **Other Sessions**: å…¶ä»–è®¾å¤‡ä¸Šçš„æ´»è·ƒä¼šè¯åˆ—è¡¨

### æ’¤é”€å•ä¸ªä¼šè¯
1. åœ¨ "Other Sessions" åˆ—è¡¨ä¸­æ‰¾åˆ°è¦æ’¤é”€çš„ä¼šè¯ã€‚
2. ç‚¹å‡»è¯¥ä¼šè¯å³ä¾§çš„ **Revoke** æŒ‰é’®ã€‚
3. ç¡®è®¤æ’¤é”€æ“ä½œã€‚

### æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯
1. åœ¨ Sessions é¡µé¢æ‰¾åˆ° **Sign out all other sessions** æŒ‰é’®ã€‚
2. ç‚¹å‡»ç¡®è®¤ã€‚
3. ç³»ç»Ÿä¼šç™»å‡ºé™¤å½“å‰ä¼šè¯å¤–çš„æ‰€æœ‰ä¼šè¯ã€‚

### ç®¡ç†å‘˜å¼ºåˆ¶ç™»å‡ºç”¨æˆ·
1. å¯¼èˆªåˆ° **Users** é¡µé¢ã€‚
2. æ‰¾åˆ°ç›®æ ‡ç”¨æˆ·ï¼Œç‚¹å‡» `...` èœå•ã€‚
3. é€‰æ‹© **Force Logout**ã€‚
4. ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒä¼šè¯å°†è¢«ç»ˆæ­¢ã€‚

### ä¼šè¯ä¿¡æ¯è¯´æ˜
æ¯ä¸ªä¼šè¯æ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š
- **Device**: è®¾å¤‡ç±»å‹å’Œæµè§ˆå™¨ï¼ˆå¦‚ "Desktop - Chrome"ï¼‰
- **IP Address**: ç™»å½•IPåœ°å€
- **Location**: åœ°ç†ä½ç½®ï¼ˆåŸºäºIPï¼‰
- **Last Active**: æœ€åæ´»è·ƒæ—¶é—´
- **Created**: ä¼šè¯åˆ›å»ºæ—¶é—´

---

## 10. Passkey ç®¡ç† (WebAuthn)

Passkey æ˜¯ä¸€ç§æ›´å®‰å…¨ã€æ›´ä¾¿æ·çš„æ— å¯†ç è®¤è¯æ–¹å¼ï¼ŒåŸºäº WebAuthn æ ‡å‡†ã€‚

### æ·»åŠ  Passkey
1. å¯¼èˆªåˆ° **Settings** > **Passkeys**ã€‚
2. ç‚¹å‡» **Add Passkey** æŒ‰é’®ã€‚
3. ç³»ç»Ÿä¼šè·³è½¬åˆ° Keycloak çš„ WebAuthn æ³¨å†Œé¡µé¢ã€‚
4. æŒ‰ç…§æµè§ˆå™¨æç¤ºå®Œæˆæ³¨å†Œï¼š
   - ä½¿ç”¨æŒ‡çº¹ã€é¢å®¹è¯†åˆ«æˆ–å®‰å…¨å¯†é’¥
   - ä¸º Passkey å‘½åï¼ˆå¯é€‰ï¼‰
5. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨è¿”å› Auth9ã€‚

### æŸ¥çœ‹å·²æ³¨å†Œçš„ Passkey
åœ¨ **Settings** > **Passkeys** é¡µé¢å¯ä»¥çœ‹åˆ°æ‰€æœ‰å·²æ³¨å†Œçš„ Passkeyï¼š
- **Label**: Passkey åç§°
- **Type**: ç±»å‹ï¼ˆPasswordless æˆ– Two-Factorï¼‰
- **Created**: åˆ›å»ºæ—¶é—´

### åˆ é™¤ Passkey
1. åœ¨ Passkey åˆ—è¡¨ä¸­æ‰¾åˆ°è¦åˆ é™¤çš„å‡­æ®ã€‚
2. ç‚¹å‡»å³ä¾§çš„ **Delete** æŒ‰é’®ã€‚
3. ç¡®è®¤åˆ é™¤æ“ä½œã€‚

**æ³¨æ„**:
- åˆ é™¤ Passkey åï¼Œè¯¥è®¾å¤‡/å¯†é’¥å°†æ— æ³•ç”¨äºç™»å½•
- å»ºè®®è‡³å°‘ä¿ç•™ä¸€ç§è®¤è¯æ–¹å¼

### Passkey çš„ä¼˜åŠ¿
- **æ›´å®‰å…¨**: æŠµæŠ—é’“é±¼æ”»å‡»ï¼Œç§é’¥ä¸ç¦»å¼€è®¾å¤‡
- **æ›´ä¾¿æ·**: ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«ï¼ˆæŒ‡çº¹/é¢å®¹ï¼‰å¿«é€Ÿç™»å½•
- **è·¨è®¾å¤‡**: æ”¯æŒäº‘åŒæ­¥ï¼Œå¯åœ¨å¤šè®¾å¤‡ä½¿ç”¨

---

## 11. ç¤¾äº¤ç™»å½•ä¸ä¼ä¸š SSO (Identity Providers)

é…ç½®ç¬¬ä¸‰æ–¹èº«ä»½æä¾›å•†ï¼Œæ”¯æŒç¤¾äº¤ç™»å½•å’Œä¼ä¸š SSOã€‚

### æ”¯æŒçš„èº«ä»½æä¾›å•†
- **Google**: Google è´¦å·ç™»å½•
- **GitHub**: GitHub è´¦å·ç™»å½•
- **Microsoft**: Microsoft/Azure AD ç™»å½•
- **OpenID Connect**: é€šç”¨ OIDC æä¾›å•†
- **SAML 2.0**: ä¼ä¸šçº§ SAML é›†æˆ

### æ·»åŠ èº«ä»½æä¾›å•†
1. å¯¼èˆªåˆ° **Settings** > **Identity Providers**ã€‚
2. ç‚¹å‡» **Add Provider** æŒ‰é’®ã€‚
3. é€‰æ‹©æä¾›å•†ç±»å‹ï¼ˆGoogle/GitHub/OIDC/SAML ç­‰ï¼‰ã€‚
4. å¡«å†™é…ç½®ä¿¡æ¯ï¼š

**Google/GitHub/Microsoft**:
- **Alias**: å”¯ä¸€æ ‡è¯†ç¬¦
- **Display Name**: æ˜¾ç¤ºåç§°
- **Client ID**: ä»æä¾›å•†æ§åˆ¶å°è·å–
- **Client Secret**: ä»æä¾›å•†æ§åˆ¶å°è·å–

**OIDC (é€šç”¨)**:
- **Alias**: å”¯ä¸€æ ‡è¯†ç¬¦
- **Display Name**: æ˜¾ç¤ºåç§°
- **Client ID**: OIDC Client ID
- **Client Secret**: OIDC Client Secret
- **Authorization URL**: æˆæƒç«¯ç‚¹
- **Token URL**: Token ç«¯ç‚¹

**SAML 2.0**:
- **Alias**: å”¯ä¸€æ ‡è¯†ç¬¦
- **Display Name**: æ˜¾ç¤ºåç§°
- **Entity ID**: IdP Entity ID
- **SSO URL**: å•ç‚¹ç™»å½• URL
- **Certificate**: IdP å…¬é’¥è¯ä¹¦

5. ç‚¹å‡» **Create** ä¿å­˜é…ç½®ã€‚

### å¯ç”¨/ç¦ç”¨èº«ä»½æä¾›å•†
1. åœ¨èº«ä»½æä¾›å•†åˆ—è¡¨ä¸­æ‰¾åˆ°ç›®æ ‡æä¾›å•†ã€‚
2. ä½¿ç”¨ **Enabled** å¼€å…³åˆ‡æ¢çŠ¶æ€ã€‚

### æŸ¥çœ‹ç”¨æˆ·å…³è”è´¦æˆ·
1. å¯¼èˆªåˆ° **Settings** > **Linked Accounts**ã€‚
2. é¡µé¢æ˜¾ç¤ºå½“å‰ç”¨æˆ·å·²å…³è”çš„ç¬¬ä¸‰æ–¹è´¦æˆ·ã€‚
3. å¯ä»¥å…³è”æ–°è´¦æˆ·æˆ–è§£ç»‘å·²æœ‰å…³è”ã€‚

### è§£ç»‘ç¬¬ä¸‰æ–¹è´¦æˆ·
1. åœ¨ Linked Accounts é¡µé¢æ‰¾åˆ°è¦è§£ç»‘çš„è´¦æˆ·ã€‚
2. ç‚¹å‡» **Unlink** æŒ‰é’®ã€‚
3. ç¡®è®¤è§£ç»‘æ“ä½œã€‚

**æ³¨æ„**: ç¡®ä¿è§£ç»‘åä»æœ‰å…¶ä»–ç™»å½•æ–¹å¼ï¼ˆå¦‚å¯†ç æˆ–å…¶ä»–å…³è”è´¦æˆ·ï¼‰ã€‚

---

## 12. åˆ†æä¸ç›‘æ§ (Analytics)

æŸ¥çœ‹ç™»å½•ç»Ÿè®¡å’Œç”¨æˆ·æ´»åŠ¨åˆ†æã€‚

### æŸ¥çœ‹åˆ†æä»ªè¡¨æ¿
1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ **Analytics**ã€‚
2. ä½¿ç”¨æ—¶é—´èŒƒå›´é€‰æ‹©å™¨ç­›é€‰æ•°æ®ï¼ˆ7å¤©/14å¤©/30å¤©/90å¤©ï¼‰ã€‚
3. æŸ¥çœ‹å…³é”®æŒ‡æ ‡ï¼š
   - **Total Logins**: æ€»ç™»å½•æ¬¡æ•°
   - **Successful Logins**: æˆåŠŸç™»å½•æ¬¡æ•°å’ŒæˆåŠŸç‡
   - **Failed Logins**: å¤±è´¥ç™»å½•æ¬¡æ•°
   - **Unique Users**: ç‹¬ç«‹ç”¨æˆ·æ•°

### æŸ¥çœ‹äº‹ä»¶ç±»å‹åˆ†å¸ƒ
åˆ†æä»ªè¡¨æ¿æ˜¾ç¤ºä»¥ä¸‹åˆ†å¸ƒå›¾è¡¨ï¼š
- **By Event Type**: æŒ‰äº‹ä»¶ç±»å‹åˆ†å¸ƒï¼ˆç™»å½•æˆåŠŸã€å¯†ç é”™è¯¯ã€MFAå¤±è´¥ç­‰ï¼‰
- **By Device Type**: æŒ‰è®¾å¤‡ç±»å‹åˆ†å¸ƒï¼ˆDesktop/Mobile/Tabletï¼‰

### æŸ¥çœ‹ç™»å½•äº‹ä»¶æ—¥å¿—
1. åœ¨ Analytics é¡µé¢ç‚¹å‡» **View Login Events**ã€‚
2. æˆ–ç›´æ¥å¯¼èˆªåˆ° **Analytics** > **Events**ã€‚
3. äº‹ä»¶æ—¥å¿—åŒ…å«ï¼š
   - **Time**: äº‹ä»¶æ—¶é—´
   - **Event Type**: äº‹ä»¶ç±»å‹
     - âœ… Login Success - ç™»å½•æˆåŠŸ
     - âœ… Social Login - ç¤¾äº¤ç™»å½•æˆåŠŸ
     - âŒ Wrong Password - å¯†ç é”™è¯¯
     - âŒ MFA Failed - MFA éªŒè¯å¤±è´¥
     - ğŸ”’ Account Locked - è´¦æˆ·è¢«é”å®š
   - **User**: ç”¨æˆ·é‚®ç®±æˆ–ID
   - **IP Address**: æ¥æºIP
   - **Device**: è®¾å¤‡ç±»å‹
   - **Details**: è¯¦ç»†ä¿¡æ¯ï¼ˆå¤±è´¥åŸå› ã€åœ°ç†ä½ç½®ç­‰ï¼‰

### åˆ†é¡µå’Œç­›é€‰
- ä½¿ç”¨é¡µç å¯¼èˆªæµè§ˆæ›´å¤šäº‹ä»¶
- äº‹ä»¶æŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼ˆæœ€æ–°åœ¨å‰ï¼‰

---

## 13. å®‰å…¨å‘Šè­¦ (Security Alerts)

ç›‘æ§å’Œå“åº”å®‰å…¨å¨èƒã€‚

### æŸ¥çœ‹å®‰å…¨å‘Šè­¦
1. å¯¼èˆªåˆ° **Security** > **Alerts**ã€‚
2. é»˜è®¤æ˜¾ç¤ºæ‰€æœ‰å‘Šè­¦ï¼Œå¯åˆ‡æ¢ç­›é€‰ï¼š
   - **All**: æ‰€æœ‰å‘Šè­¦
   - **Unresolved**: ä»…æœªè§£å†³çš„å‘Šè­¦ï¼ˆæ˜¾ç¤ºæ•°é‡ï¼‰

### å‘Šè­¦ç±»å‹
ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ä»¥ä¸‹å®‰å…¨å¨èƒï¼š
- **Brute Force Attack**: æš´åŠ›ç ´è§£å°è¯•ï¼ˆçŸ­æ—¶é—´å†…å¤šæ¬¡å¤±è´¥ç™»å½•ï¼‰
- **New Device Login**: æ–°è®¾å¤‡ç™»å½•
- **Impossible Travel**: ä¸å¯èƒ½çš„æ—…è¡Œï¼ˆçŸ­æ—¶é—´å†…ä»ä¸åŒåœ°ç†ä½ç½®ç™»å½•ï¼‰
- **Suspicious IP**: å¯ç–‘IPåœ°å€

### å‘Šè­¦ä¸¥é‡çº§åˆ«
- ğŸ”´ **Critical**: ä¸¥é‡ - éœ€è¦ç«‹å³å¤„ç†
- ğŸŸ  **High**: é«˜ - éœ€è¦å°½å¿«å¤„ç†
- ğŸŸ¡ **Medium**: ä¸­ç­‰ - éœ€è¦å…³æ³¨
- ğŸŸ¢ **Low**: ä½ - ä»…ä¾›å‚è€ƒ

### å¤„ç†å‘Šè­¦
1. æŸ¥çœ‹å‘Šè­¦è¯¦æƒ…ï¼ˆç”¨æˆ·IDã€æ—¶é—´ã€JSONè¯¦æƒ…ï¼‰ã€‚
2. è¯„ä¼°å¨èƒä¸¥é‡æ€§ã€‚
3. é‡‡å–å¿…è¦æªæ–½ï¼š
   - å¼ºåˆ¶ç”¨æˆ·ç™»å‡º
   - é‡ç½®ç”¨æˆ·å¯†ç 
   - å¯ç”¨ MFA
4. ç‚¹å‡» **Resolve** æ ‡è®°ä¸ºå·²è§£å†³ã€‚

### å®‰å…¨å»ºè®®
- 24å°æ—¶å†…å®¡æŸ¥æ‰€æœ‰ Critical å‘Šè­¦
- ä¸ºç®¡ç†å‘˜è´¦æˆ·å¯ç”¨ MFA
- é…ç½®é€Ÿç‡é™åˆ¶é˜²æ­¢æš´åŠ›ç ´è§£
- è®¾ç½® Webhook å®æ—¶é€šçŸ¥å®‰å…¨äº‹ä»¶
- å®šæœŸå®¡æŸ¥æ´»è·ƒä¼šè¯

---

## 14. Webhook é…ç½®

é…ç½® Webhook æ¥æ”¶å®æ—¶äº‹ä»¶é€šçŸ¥ã€‚

### æ”¯æŒçš„äº‹ä»¶ç±»å‹
- `login.success` - ç™»å½•æˆåŠŸ
- `login.failed` - ç™»å½•å¤±è´¥
- `user.created` - ç”¨æˆ·åˆ›å»º
- `user.updated` - ç”¨æˆ·æ›´æ–°
- `user.deleted` - ç”¨æˆ·åˆ é™¤
- `password.changed` - å¯†ç ä¿®æ”¹
- `mfa.enabled` - MFA å¯ç”¨
- `mfa.disabled` - MFA ç¦ç”¨
- `session.revoked` - ä¼šè¯æ’¤é”€
- `security.alert` - å®‰å…¨å‘Šè­¦

### åˆ›å»º Webhook
1. å¯¼èˆªåˆ° **Tenants** é¡µé¢ã€‚
2. ç‚¹å‡»ç›®æ ‡ç§Ÿæˆ·è¿›å…¥è¯¦æƒ…ã€‚
3. é€‰æ‹© **Webhooks** æ ‡ç­¾é¡µã€‚
4. ç‚¹å‡» **Add Webhook** æŒ‰é’®ã€‚
5. å¡«å†™é…ç½®ï¼š
   - **Name**: Webhook åç§°
   - **Endpoint URL**: æ¥æ”¶é€šçŸ¥çš„ HTTPS ç«¯ç‚¹
   - **Secret**: (å¯é€‰) ç”¨äºç­¾åéªŒè¯çš„å¯†é’¥
   - **Events**: å‹¾é€‰è¦è®¢é˜…çš„äº‹ä»¶ç±»å‹
   - **Enabled**: æ˜¯å¦å¯ç”¨
6. ç‚¹å‡» **Create**ã€‚

### æµ‹è¯• Webhook
1. åœ¨ Webhook åˆ—è¡¨ä¸­æ‰¾åˆ°ç›®æ ‡ Webhookã€‚
2. ç‚¹å‡» **Test** æŒ‰é’®ã€‚
3. ç³»ç»Ÿå‘é€æµ‹è¯•è¯·æ±‚å¹¶æ˜¾ç¤ºç»“æœï¼š
   - **Status Code**: HTTP å“åº”çŠ¶æ€ç 
   - **Response Time**: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

### Webhook ç­¾åéªŒè¯
å¦‚æœé…ç½®äº† Secretï¼ŒAuth9 ä¼šåœ¨è¯·æ±‚å¤´ä¸­åŒ…å« HMAC ç­¾åï¼š
```
X-Webhook-Signature: sha256=<signature>
```

éªŒè¯ç¤ºä¾‹ï¼ˆNode.jsï¼‰ï¼š
```javascript
const crypto = require('crypto');

function verifySignature(payload, signature, secret) {
  const expected = 'sha256=' + crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');
  return crypto.timingSafeEqual(
    Buffer.from(signature),
    Buffer.from(expected)
  );
}
```

### ç¼–è¾‘/åˆ é™¤ Webhook
- **Edit**: ç‚¹å‡» Webhook å³ä¾§çš„ç¼–è¾‘æŒ‰é’®ä¿®æ”¹é…ç½®
- **Delete**: ç‚¹å‡»åˆ é™¤æŒ‰é’®ç§»é™¤ Webhook

### ç›‘æ§ Webhook çŠ¶æ€
Webhook åˆ—è¡¨æ˜¾ç¤ºï¼š
- **Status**: å¯ç”¨çŠ¶æ€ï¼ˆç»¿è‰²/ç°è‰²æŒ‡ç¤ºç‚¹ï¼‰
- **Failure Count**: å¤±è´¥æ¬¡æ•°ï¼ˆå¦‚æœ‰ï¼‰
- **Last Triggered**: æœ€åè§¦å‘æ—¶é—´

---

## 15. æ“ä½œå¼•æ“ (Action Engine)

æ“ä½œå¼•æ“ï¼ˆAction Engineï¼‰æ˜¯ Auth9 çš„è‡ªåŠ¨åŒ–å·¥ä½œæµç³»ç»Ÿï¼Œå…è®¸æ‚¨åœ¨ç‰¹å®šäº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œè‡ªå®šä¹‰çš„ JavaScript/TypeScript ä»£ç ã€‚

### ä»€ä¹ˆæ˜¯ Actionï¼Ÿ

Action æ˜¯ä¸€æ®µåœ¨ç‰¹å®šè®¤è¯äº‹ä»¶ï¼ˆå¦‚ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½®ç­‰ï¼‰è§¦å‘æ—¶è‡ªåŠ¨æ‰§è¡Œçš„ä»£ç ã€‚é€šè¿‡ Actionï¼Œæ‚¨å¯ä»¥ï¼š

- ğŸ“§ è‡ªåŠ¨å‘é€æ¬¢è¿é‚®ä»¶
- ğŸ”” å‘é€å®æ—¶é€šçŸ¥åˆ° Slackã€é’‰é’‰ç­‰
- ğŸ“Š åŒæ­¥ç”¨æˆ·æ•°æ®åˆ° CRM æˆ–æ•°æ®ä»“åº“
- ğŸ” æ‰§è¡Œé¢å¤–çš„å®‰å…¨æ£€æŸ¥
- ğŸ¯ é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡å’Œ API

### åˆ›å»º Action

1. é€‰æ‹©ç›®æ ‡ç§Ÿæˆ·ï¼Œå¯¼èˆªåˆ° **Actions** é¡µé¢
2. ç‚¹å‡» **Create Action** æŒ‰é’®
3. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Name**: Action åç§°ï¼ˆä¾‹å¦‚ï¼š"å‘é€æ¬¢è¿é‚®ä»¶"ï¼‰
   - **Trigger**: é€‰æ‹©è§¦å‘äº‹ä»¶ç±»å‹
   - **Code**: ç¼–å†™ JavaScript/TypeScript ä»£ç 
   - **Enabled**: æ˜¯å¦ç«‹å³å¯ç”¨
4. ç‚¹å‡» **Save** ä¿å­˜

### æ”¯æŒçš„è§¦å‘å™¨

| è§¦å‘å™¨ | è§¦å‘æ—¶æœº |
|--------|---------|
| `login.success` | ç”¨æˆ·ç™»å½•æˆåŠŸ |
| `login.failed` | ç”¨æˆ·ç™»å½•å¤±è´¥ |
| `user.created` | æ–°ç”¨æˆ·åˆ›å»º |
| `user.updated` | ç”¨æˆ·ä¿¡æ¯æ›´æ–° |
| `user.deleted` | ç”¨æˆ·åˆ é™¤ |
| `password.changed` | å¯†ç ä¿®æ”¹ |
| `password.reset` | å¯†ç é‡ç½®è¯·æ±‚ |
| `mfa.enabled` | å¯ç”¨ MFA |
| `mfa.disabled` | ç¦ç”¨ MFA |
| `session.revoked` | ä¼šè¯æ’¤é”€ |
| `invitation.created` | åˆ›å»ºé‚€è¯· |

### ç¼–å†™ Action ä»£ç 

Action ä»£ç æ˜¯æ ‡å‡†çš„ JavaScript/TypeScriptï¼Œæ”¯æŒ `async/await` å’Œ `fetch()` APIã€‚

**åŸºç¡€æ¨¡æ¿**ï¼š
```javascript
async function handler(context) {
  // context åŒ…å«ç”¨æˆ·ã€ç§Ÿæˆ·å’Œäº‹ä»¶ä¿¡æ¯
  const { user, tenant, event } = context;
  
  // æ‚¨çš„ä¸šåŠ¡é€»è¾‘
  console.log(`User ${user.email} logged in`);
  
  // è¿”å›ç»“æœï¼ˆå¯é€‰ï¼‰
  return { success: true };
}
```

**ç¤ºä¾‹ 1ï¼šå‘é€æ¬¢è¿é‚®ä»¶**
```javascript
async function handler(context) {
  const { user, tenant } = context;
  
  // è°ƒç”¨é‚®ä»¶æœåŠ¡ API
  const response = await fetch('https://api.sendgrid.com/v3/mail/send', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${context.secrets.SENDGRID_API_KEY}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      personalizations: [{
        to: [{ email: user.email, name: user.name }]
      }],
      from: { email: 'noreply@example.com', name: tenant.name },
      subject: `æ¬¢è¿åŠ å…¥ ${tenant.name}ï¼`,
      content: [{
        type: 'text/html',
        value: `<h1>æ¬¢è¿ï¼Œ${user.name}ï¼</h1>`
      }]
    })
  });
  
  if (!response.ok) {
    throw new Error('å‘é€é‚®ä»¶å¤±è´¥');
  }
  
  console.log(`æ¬¢è¿é‚®ä»¶å·²å‘é€åˆ° ${user.email}`);
  return { success: true };
}
```

**ç¤ºä¾‹ 2ï¼šSlack é€šçŸ¥**
```javascript
async function handler(context) {
  const { user, tenant } = context;
  
  await fetch(context.secrets.SLACK_WEBHOOK_URL, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      text: `ğŸ‰ æ–°ç”¨æˆ·æ³¨å†Œ`,
      blocks: [{
        type: 'section',
        text: {
          type: 'mrkdwn',
          text: `*æ–°ç”¨æˆ·æ³¨å†Œ*\nâ€¢ é‚®ç®±: ${user.email}\nâ€¢ å§“å: ${user.name}\nâ€¢ ç§Ÿæˆ·: ${tenant.name}`
        }
      }]
    })
  });
  
  return { notified: true };
}
```

### Context API

æ¯ä¸ª Action æ¥æ”¶ä¸€ä¸ª `context` å¯¹è±¡ï¼š

```javascript
{
  trigger: "login.success",    // è§¦å‘å™¨ç±»å‹
  user: {
    id: "user_123",
    email: "user@example.com",
    name: "John Doe",
    first_name: "John",
    last_name: "Doe"
  },
  tenant: {
    id: "tenant_456",
    name: "Acme Corp",
    slug: "acme",
    logo_url: "https://..."
  },
  event: {
    type: "login",
    timestamp: "2026-02-16T10:00:00Z",
    ip_address: "192.168.1.1",
    device_type: "Desktop - Chrome"
  },
  secrets: {
    // æ‚¨é…ç½®çš„ç¯å¢ƒå˜é‡ï¼ˆAPI å¯†é’¥ç­‰ï¼‰
  }
}
```

### é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯†é’¥ï¼‰

Action ç»å¸¸éœ€è¦è®¿é—®ç¬¬ä¸‰æ–¹ API å¯†é’¥ã€‚é…ç½®æ–¹æ³•ï¼š

1. åœ¨ Action ç¼–è¾‘é¡µé¢ï¼Œç‚¹å‡» **Secrets** æ ‡ç­¾
2. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   - **Name**: å˜é‡åï¼ˆå¦‚ `SENDGRID_API_KEY`ï¼‰
   - **Value**: å¯†é’¥å€¼
3. ç‚¹å‡» **Save**

åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š
```javascript
const apiKey = context.secrets.SENDGRID_API_KEY;
```

**å®‰å…¨æç¤º**ï¼š
- å¯†é’¥åœ¨æ•°æ®åº“ä¸­åŠ å¯†å­˜å‚¨
- ä¸ä¼šå‡ºç°åœ¨æ—¥å¿—ä¸­
- ä»… Action ä»£ç å¯è®¿é—®

### æµ‹è¯• Action

åœ¨ä¿å­˜å‰æµ‹è¯• Actionï¼š

1. åœ¨ Action ç¼–è¾‘é¡µé¢ï¼Œç‚¹å‡» **Test** æŒ‰é’®
2. æä¾›æµ‹è¯•æ•°æ®ï¼ˆæ¨¡æ‹ŸçœŸå®äº‹ä»¶ï¼‰
3. ç‚¹å‡» **Run Test**
4. æŸ¥çœ‹æ‰§è¡Œç»“æœå’Œæ—¥å¿—

æµ‹è¯•æ•°æ®ç¤ºä¾‹ï¼š
```json
{
  "trigger": "user.created",
  "user": {
    "id": "test_user",
    "email": "test@example.com",
    "name": "Test User"
  },
  "tenant": {
    "id": "test_tenant",
    "name": "Test Corp",
    "slug": "test"
  }
}
```

### æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—

1. å¯¼èˆªåˆ° **Actions** > **Logs** é¡µé¢
2. æŸ¥çœ‹æ‰€æœ‰ Action çš„æ‰§è¡Œå†å²
3. å¯ä»¥çœ‹åˆ°ï¼š
   - æ‰§è¡Œæ—¶é—´
   - çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
   - æ‰§è¡Œæ—¶é•¿
   - æ—¥å¿—è¾“å‡ºï¼ˆ`console.log` çš„å†…å®¹ï¼‰
   - é”™è¯¯ä¿¡æ¯

### è°ƒè¯•æŠ€å·§

**ä½¿ç”¨ console.log è¾“å‡ºè°ƒè¯•ä¿¡æ¯**ï¼š
```javascript
async function handler(context) {
  console.log('Context:', JSON.stringify(context, null, 2));
  console.log('User email:', context.user.email);
  
  try {
    const result = await someOperation();
    console.log('Result:', result);
  } catch (error) {
    console.error('Error:', error.message);
    throw error;
  }
}
```

### ç›‘æ§å’Œç»Ÿè®¡

åœ¨ Action åˆ—è¡¨é¡µé¢ï¼Œæ¯ä¸ª Action æ˜¾ç¤ºï¼š
- **Total Executions**: æ€»æ‰§è¡Œæ¬¡æ•°
- **Success Rate**: æˆåŠŸç‡
- **Avg Duration**: å¹³å‡æ‰§è¡Œæ—¶é•¿
- **Last Run**: æœ€åæ‰§è¡Œæ—¶é—´

ç‚¹å‡» Action åç§°å¯æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡å›¾è¡¨ã€‚

### å¸¸è§ç”¨ä¾‹

**1. ç”¨æˆ·æ³¨å†Œè‡ªåŠ¨åŒ–**
- å‘é€æ¬¢è¿é‚®ä»¶
- åŒæ­¥åˆ° CRMï¼ˆHubSpotã€Salesforceï¼‰
- é€šçŸ¥ Slack é¢‘é“
- åˆå§‹åŒ–ç”¨æˆ·é…ç½®

**2. ç™»å½•å®‰å…¨æ£€æµ‹**
- æ£€æµ‹æ–°è®¾å¤‡ç™»å½•
- å¼‚å¸¸ IP å‘Šè­¦
- è®°å½•ç™»å½•å†å²
- å‘é€ç™»å½•é€šçŸ¥

**3. æ•°æ®åŒæ­¥**
- åŒæ­¥ç”¨æˆ·ä¿¡æ¯åˆ°å¤–éƒ¨ç³»ç»Ÿ
- æ›´æ–°æ•°æ®ä»“åº“
- è§¦å‘ ETL æµç¨‹

**4. å®¡è®¡å’Œåˆè§„**
- è®°å½•æ•æ„Ÿæ“ä½œ
- ç”Ÿæˆå®¡è®¡æŠ¥å‘Š
- æ»¡è¶³åˆè§„è¦æ±‚

### æœ€ä½³å®è·µ

1. **é”™è¯¯å¤„ç†**ï¼šå§‹ç»ˆä½¿ç”¨ try-catch å¤„ç†å¼‚æ­¥æ“ä½œ
2. **è¶…æ—¶æ§åˆ¶**ï¼šä¸ºå¤–éƒ¨ API è°ƒç”¨è®¾ç½®è¶…æ—¶
3. **æ—¥å¿—è®°å½•**ï¼šä½¿ç”¨ console.log è®°å½•å…³é”®ä¿¡æ¯
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ Promise.all å¹¶è¡Œæ‰§è¡Œå¤šä¸ªè¯·æ±‚
5. **å®‰å…¨æ€§**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯

### é™åˆ¶

- **æ‰§è¡Œè¶…æ—¶**: 30 ç§’
- **å†…å­˜é™åˆ¶**: 128MB
- **å¹¶å‘æ‰§è¡Œ**: æœ€å¤š 100 ä¸ª Action åŒæ—¶æ‰§è¡Œ
- **æ—¥å¿—å¤§å°**: å•æ¬¡æ‰§è¡Œæœ€å¤š 10KB æ—¥å¿—

### å¸¸è§é—®é¢˜

**Q: Action æœªæ‰§è¡Œï¼Ÿ**
- æ£€æŸ¥ Action æ˜¯å¦å¯ç”¨ï¼ˆEnabled å¼€å…³ï¼‰
- éªŒè¯è§¦å‘å™¨ç±»å‹æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

**Q: å¤–éƒ¨ API è°ƒç”¨å¤±è´¥ï¼Ÿ**
- æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®
- éªŒè¯ç½‘ç»œè¿æ¥
- æŸ¥çœ‹ API æä¾›å•†çš„é€Ÿç‡é™åˆ¶

**Q: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼Ÿ**
- å¯¼èˆªåˆ° **Actions** > **Logs**
- æ‰¾åˆ°å¤±è´¥çš„æ‰§è¡Œè®°å½•
- æŸ¥çœ‹é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [æ“ä½œå¼•æ“ (Action Engine)](../wiki/æ“ä½œå¼•æ“-Action-Engine.md) æ–‡æ¡£ã€‚

---

## 16. å¸¸è§é—®é¢˜

### è®¤è¯é—®é¢˜
- **æ— æ³•ç™»å½•ï¼Ÿ** æ£€æŸ¥ Redirect URI æ˜¯å¦é…ç½®æ­£ç¡®ã€‚
- **Secret ä¸¢å¤±ï¼Ÿ** ä½¿ç”¨ **Regenerate Client Secret** ç”Ÿæˆæ–°çš„ã€‚
- **MFA è®¾å¤‡ä¸¢å¤±ï¼Ÿ** è”ç³»ç®¡ç†å‘˜é‡ç½® MFAã€‚

### å¯†ç é—®é¢˜
- **å¿˜è®°å¯†ç ï¼Ÿ** ä½¿ç”¨ç™»å½•é¡µçš„ "Forgot Password" åŠŸèƒ½ã€‚
- **å¯†ç ä¸ç¬¦åˆç­–ç•¥ï¼Ÿ** æ£€æŸ¥å¯†ç ç­–ç•¥è¦æ±‚ï¼ˆé•¿åº¦ã€å¤æ‚åº¦ç­‰ï¼‰ã€‚
- **è´¦æˆ·è¢«é”å®šï¼Ÿ** ç­‰å¾…é”å®šæ—¶é—´è¿‡æœŸæˆ–è”ç³»ç®¡ç†å‘˜è§£é”ã€‚

### ä¼šè¯é—®é¢˜
- **çœ‹ä¸åˆ°å…¶ä»–ä¼šè¯ï¼Ÿ** å¯èƒ½åªæœ‰å½“å‰è®¾å¤‡ç™»å½•ã€‚
- **ä¼šè¯è¢«æ„å¤–ç»ˆæ­¢ï¼Ÿ** æ£€æŸ¥æ˜¯å¦æœ‰ç®¡ç†å‘˜å¼ºåˆ¶ç™»å‡ºæˆ–å¯†ç è¢«ä¿®æ”¹ã€‚

### Passkey é—®é¢˜
- **æ— æ³•æ³¨å†Œ Passkeyï¼Ÿ** ç¡®ä¿æµè§ˆå™¨æ”¯æŒ WebAuthnï¼ˆChromeã€Firefoxã€Safari æœ€æ–°ç‰ˆï¼‰ã€‚
- **Passkey ç™»å½•å¤±è´¥ï¼Ÿ** æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒï¼Œæˆ–å°è¯•åˆ é™¤é‡æ–°æ³¨å†Œã€‚

### SSO é—®é¢˜
- **ç¬¬ä¸‰æ–¹ç™»å½•å¤±è´¥ï¼Ÿ** æ£€æŸ¥èº«ä»½æä¾›å•†é…ç½®ï¼ˆClient IDã€Secretã€å›è°ƒURLï¼‰ã€‚
- **SAML ç™»å½•å¾ªç¯ï¼Ÿ** æ£€æŸ¥ Entity ID å’Œè¯ä¹¦é…ç½®æ˜¯å¦æ­£ç¡®ã€‚

### Webhook é—®é¢˜
- **Webhook æœªè§¦å‘ï¼Ÿ** æ£€æŸ¥æ˜¯å¦å¯ç”¨ï¼Œä»¥åŠè®¢é˜…çš„äº‹ä»¶ç±»å‹æ˜¯å¦æ­£ç¡®ã€‚
- **ç­¾åéªŒè¯å¤±è´¥ï¼Ÿ** ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Secret å’Œç­¾åç®—æ³•ã€‚

---

## 17. å¸¸è§å·¥ä½œæµç¨‹

### 16.1 B2B ç§Ÿæˆ·å…¥é©»æµç¨‹

å½“æ‚¨æœ‰ä¸€ä¸ªæ–°çš„ B2B å®¢æˆ·ï¼ˆç§Ÿæˆ·ï¼‰éœ€è¦æ¥å…¥ Auth9 æ—¶ï¼š

1.  **åˆ›å»ºç§Ÿæˆ·**ï¼š
    - å¯¼èˆªåˆ° `Tenants`ï¼Œç‚¹å‡» `Create Tenant`ã€‚
    - è¾“å…¥å®¢æˆ·å…¬å¸åç§°ï¼ˆå¦‚ `Acme Corp`ï¼‰å’Œ Slugï¼ˆå¦‚ `acme`ï¼‰ã€‚
    - *å¯é€‰*ï¼šä¸Šä¼ å®¢æˆ·çš„ Logoï¼Œé…ç½®å“ç‰Œè‰²ã€‚

2.  **é…ç½®ç§Ÿæˆ·ç­–ç•¥**ï¼š
    - åœ¨ç§Ÿæˆ·è¯¦æƒ…é¡µï¼Œè¿›å…¥ `Settings`ã€‚
    - é…ç½® **å¯†ç ç­–ç•¥**ï¼ˆå¦‚è¦æ±‚æ›´é«˜å¼ºåº¦çš„å¯†ç ï¼‰ã€‚
    - é…ç½® **MFA ç­–ç•¥**ï¼ˆå¦‚å¼ºåˆ¶ç®¡ç†å‘˜å¼€å¯ MFAï¼‰ã€‚

3.  **é…ç½®èº«ä»½æº (å¯é€‰)**ï¼š
    - å¦‚æœå®¢æˆ·å¸Œæœ›ä½¿ç”¨è‡ªå·±çš„ä¼ä¸š SSOï¼ˆå¦‚ Azure AD æˆ– Oktaï¼‰ã€‚
    - å¯¼èˆªåˆ° `Settings` > `Identity Providers`ã€‚
    - æ·»åŠ  SAML æˆ– OIDC æä¾›å•†ï¼Œå¡«å…¥å®¢æˆ·æä¾›çš„å…ƒæ•°æ®ã€‚

4.  **åˆ›å»ºç®¡ç†å‘˜è´¦å·**ï¼š
    - å¯¼èˆªåˆ° `Users` > `Invitations`ã€‚
    - å‘é€é‚€è¯·ç»™å®¢æˆ·çš„ç®¡ç†å‘˜é‚®ç®±ï¼Œåˆ†é… `admin` è§’è‰²ã€‚

5.  **äº¤ä»˜**ï¼š
    - å°†ç§Ÿæˆ·çš„ç™»å½•é“¾æ¥ï¼ˆé€šå¸¸æ˜¯ `https://auth.yourdomain.com/login?tenant=acme`ï¼‰å‘é€ç»™å®¢æˆ·ã€‚

### 16.2 å¼€å‘è€…åº”ç”¨æ¥å…¥æµç¨‹

å½“å†…éƒ¨å¼€å‘å›¢é˜Ÿéœ€è¦å°†æ–°åº”ç”¨æ¥å…¥ Auth9 æ—¶ï¼š

1.  **æ³¨å†Œåº”ç”¨**ï¼š
    - å¯¼èˆªåˆ° `Services`ï¼Œç‚¹å‡» `Register Service`ã€‚
    - è¾“å…¥åº”ç”¨åç§°ï¼ˆå¦‚ `CRM Dashboard`ï¼‰å’Œ Base URLã€‚
    - é…ç½® Redirect URIsï¼ˆå¦‚ `https://crm.internal/callback`ï¼‰ã€‚

2.  **è·å–å‡­è¯**ï¼š
    - åœ¨ Service è¯¦æƒ…é¡µï¼Œè·å– `Client ID` å’Œ `Client Secret`ã€‚
    - å°†å‡­è¯å®‰å…¨åœ°åˆ†å‘ç»™å¼€å‘å›¢é˜Ÿï¼ˆå¦‚é€šè¿‡ 1Password æˆ– Vaultï¼‰ã€‚

3.  **è®¾è®¡è§’è‰²æ¨¡å‹**ï¼š
    - åœ¨ Service è¯¦æƒ…é¡µï¼Œè¿›å…¥ `Roles` é€‰é¡¹å¡ã€‚
    - åˆ›å»ºåº”ç”¨æ‰€éœ€çš„è§’è‰²ï¼ˆå¦‚ `crm_admin`, `crm_viewer`, `sales_rep`ï¼‰ã€‚
    - å‘ŠçŸ¥å¼€å‘å›¢é˜Ÿåœ¨ä»£ç ä¸­å¦‚ä½•æ ¹æ®è¿™äº›è§’è‰²è¿›è¡Œæƒé™åˆ¤æ–­ã€‚

4.  **é›†æˆæµ‹è¯•**ï¼š
    - å¼€å‘å›¢é˜Ÿä½¿ç”¨ OIDC åº“é›†æˆç™»å½•ã€‚
    - åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯ç™»å½•æµç¨‹å’Œè§’è‰²è·å–æ˜¯å¦æ­£å¸¸ã€‚

### 16.3 å®‰å…¨äº‹ä»¶å“åº”æµç¨‹

å½“æ”¶åˆ°å®‰å…¨å‘Šè­¦ï¼ˆå¦‚ `Brute Force Attack`ï¼‰æ—¶ï¼š

1.  **è¯„ä¼°å¨èƒ**ï¼š
    - åœ¨ `Security` > `Alerts` æŸ¥çœ‹å‘Šè­¦è¯¦æƒ…ã€‚
    - æ£€æŸ¥æ”»å‡»æº IP å’Œå—å½±å“çš„ç”¨æˆ·è´¦å·ã€‚

2.  **é‡‡å–è¡ŒåŠ¨**ï¼š
    - **å°ç¦ IP**ï¼šåœ¨é˜²ç«å¢™æˆ–ç½‘å…³å±‚å°ç¦æ¶æ„ IPã€‚
    - **é”å®šè´¦å·**ï¼šåœ¨ `Users` é¡µé¢æ‰¾åˆ°å—å½±å“ç”¨æˆ·ï¼Œæš‚æ—¶ç¦ç”¨è´¦å·æˆ–é‡ç½®å¯†ç ã€‚
    - **å¼ºåˆ¶ç™»å‡º**ï¼šå¯¹å—å½±å“ç”¨æˆ·æ‰§è¡Œ `Force Logout`ï¼Œæ¸…é™¤æ‰€æœ‰æ´»è·ƒä¼šè¯ã€‚

3.  **åç»­åŠ å›º**ï¼š
    - æ£€æŸ¥å¹¶åŠ å¼º `Rate Limiting` é…ç½®ã€‚
    - é€šçŸ¥å—å½±å“ç”¨æˆ·ä¿®æ”¹å¯†ç å¹¶å¯ç”¨ MFAã€‚
    - å°†å‘Šè­¦æ ‡è®°ä¸º `Resolved`ã€‚

## ç›¸å…³æ–‡æ¡£

è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£è¯·å‚è€ƒ Wikiï¼š
- [å¤šç§Ÿæˆ·ç®¡ç†](../wiki/å¤šç§Ÿæˆ·ç®¡ç†.md)
- [RBACæƒé™ç³»ç»Ÿ](../wiki/RBACæƒé™ç³»ç»Ÿ.md)
- [è®¤è¯æµç¨‹](../wiki/è®¤è¯æµç¨‹.md)
- [REST API](../wiki/REST-API.md)
- [é‚€è¯·ç³»ç»Ÿ](../wiki/é‚€è¯·ç³»ç»Ÿ.md)
- [å“ç‰Œå®šåˆ¶](../wiki/å“ç‰Œå®šåˆ¶.md)
- [é‚®ä»¶æ¨¡æ¿](../wiki/é‚®ä»¶æ¨¡æ¿.md)
- [å¯†ç ç®¡ç†](../wiki/å¯†ç ç®¡ç†.md)
- [ä¼šè¯ç®¡ç†](../wiki/ä¼šè¯ç®¡ç†.md)
- [WebAuthnä¸Passkey](../wiki/WebAuthnä¸Passkey.md)
- [ç¤¾äº¤ç™»å½•ä¸SSO](../wiki/ç¤¾äº¤ç™»å½•ä¸SSO.md)
- [åˆ†æä¸å®‰å…¨å‘Šè­¦](../wiki/åˆ†æä¸å®‰å…¨å‘Šè­¦.md)
- [Webhooké›†æˆ](../wiki/Webhooké›†æˆ.md)
- [æ“ä½œå¼•æ“ (Action Engine)](../wiki/æ“ä½œå¼•æ“-Action-Engine.md)
- [SDK é›†æˆæŒ‡å—](../wiki/SDKé›†æˆæŒ‡å—.md)
- [è¿ç»´æ‰‹å†Œ](../wiki/è¿ç»´æ‰‹å†Œ.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.5.0
**æœ€åæ›´æ–°**: 2026-02-16
**é€‚ç”¨ç‰ˆæœ¬**: Auth9 v0.1.0+

**æ›´æ–°å†…å®¹**:
- æ–°å¢ "æ“ä½œå¼•æ“ (Action Engine)" ç« èŠ‚
- æ›´æ–°ç›¸å…³æ–‡æ¡£é“¾æ¥